(function(b){function a(d,c){this.KNOB_WIDTH=32;this.KNOB_MARGIN=28;this.LEVEL_MARGIN=this.KNOB_MARGIN+10;this.LABEL_WIDTH=44;this.LEVEL_WIDTH=22;this.bearer=d;this.options=c;this.currentLevel=0}a.prototype={activate:function(){this.numOptions=this.bearer.find("input[type=radio]").length;this.reset();this.fitContainer();this.addBaseStyle();this.addLevels();this.addBar();this.setSlider();this.addInteraction();this.setDisabled();var c=this;b(window).on("resize orientationChanged",function(){c.reset();c.fitContainer();c.addBaseStyle();c.addLevels();c.setSlider();c.addInteraction();c.setDisabled()})},reset:function(){this.bearer.find("label").each(function(){b(this).removeClass("slider-label");b(this).css("left",0)});this.bearer.find(".slider-level").each(function(){b(this).remove()});this.bearer.css("width","auto")},fitContainer:function(){if(this.options.fitContainer){this.KNOB_MARGIN=(this.bearer.width()-this.KNOB_WIDTH)/(this.numOptions-1)-this.KNOB_WIDTH;this.LEVEL_MARGIN=this.KNOB_MARGIN+10}},addBaseStyle:function(){this.bearer.find("input[type=radio]").hide();this.bearer.addClass("radios-to-slider");this.bearer.addClass(this.options.size);this.bearer.css("width",(this.numOptions*this.LEVEL_WIDTH)+(this.numOptions-1)*this.LEVEL_MARGIN+"px");var c=0;var d=this;this.bearer.find("label").each(function(){var e=d.KNOB_WIDTH/2-(d.LABEL_WIDTH/2)+c*d.LEVEL_MARGIN+c*d.LEVEL_WIDTH;b(this).addClass("slider-label");b(this).css("left",e+"px");c++})},addLevels:function(){var c=this.bearer;var d=this;this.bearer.find("input[type=radio]").each(function(){var f=b(this).attr("id");c.append("<ins class='slider-level' data-radio='"+f+"'></ins>")});var e=0;this.bearer.find(".slider-level").each(function(){var f=parseInt(c.css("padding-left").replace("px",""));b(this).css("left",f+(e*d.LEVEL_MARGIN)+(e*d.LEVEL_WIDTH)+"px");e++})},addBar:function(){this.bearer.append("<ins class='slider-bar'><span class='slider-knob'></span></ins>")},setSlider:function(){var d=1;var e=this;var c;this.bearer.find("input[type=radio]").each(function(){var f=b(this).attr("id");if(b(this).prop("checked")){e.bearer.find(".slider-bar").css("display","block");e.bearer.find(".slider-bar").width((d*e.KNOB_WIDTH)+(d-1)*e.KNOB_MARGIN+"px");e.currentLevel=d}if(e.options.animation){e.bearer.find(".slider-bar").addClass("transition-enabled")}d++});c=0;this.bearer.find(".slider-level").each(function(){c++;if(c<e.currentLevel){b(this).show();b(this).addClass("slider-lower-level")}else{if(c==e.currentLevel){b(this).hide()}else{b(this).show();b(this).removeClass("slider-lower-level")}}});c=0;this.bearer.find(".slider-label").each(function(){c++;if(c==e.currentLevel){b(this).addClass("slider-label-active")}else{b(this).removeClass("slider-label-active")}})},addInteraction:function(){var d=this,e=this.bearer.find(".slider-level:not(.disabled)"),c=this.bearer.find("input[type=radio]:not(:disabled)");e.on("click",function(){var g=b(this).attr("data-radio"),f=d.bearer.find("#"+g);f.prop("checked",true);if(d.options.onSelect){d.options.onSelect(f,[e,c])}d.setSlider()});c.on("change",function(){d.setSlider()})},setDisabled:function(d,c){if(!this.options.isDisable){return}this.setDisable()},setDisable:function(c){this.options.isDisable=true;var e=this,f=this.bearer.find(".slider-level"),d=this.bearer.find("input[type=radio]");b.merge(f,d).each(function(){b(this).prop("disabled",true).addClass("disabled");b(this).off("click change")});if(typeof c==="function"){c(f,d)}},setEnable:function(c){this.options.isDisable=false;var e=this,f=this.bearer.find(".slider-level"),d=this.bearer.find("input[type=radio]");b.merge(f,d).each(function(){b(this).prop("disabled",false).removeClass("disabled");e.addInteraction()});if(typeof c==="function"){c(f,d)}}};b.fn.radiosToSlider=function(c){var d=[];this.each(function(){c=b.extend({},b.fn.radiosToSlider.defaults,c);var e=new a(b(this),c);e.activate();d.push({setDisable:e.setDisable.bind(e),setEnable:e.setEnable.bind(e)})});return d};b.fn.radiosToSlider.defaults={size:"medium",animation:true,fitContainer:true,isDisable:false,onSelect:null}})(jQuery);